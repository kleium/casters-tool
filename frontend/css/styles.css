/* ═══════════════════════════════════════════════════════════
   FRC Caster's Tool — Premium Dark Theme v2
   ═══════════════════════════════════════════════════════════ */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap');

:root {
    --bg:              #06060e;
    --bg-gradient:     linear-gradient(145deg, #06060e 0%, #0c0c1e 50%, #080814 100%);
    --surface:         #0d0d1a;
    --surface-glass:   rgba(16, 16, 32, .72);
    --card:            #12122a;
    --card-hover:      #16163a;
    --border:          rgba(99, 102, 241, .12);
    --border-subtle:   rgba(255, 255, 255, .04);
    --text:            #e8ecf4;
    --text-secondary:  #b0b8cc;
    --text-muted:      #6b7394;
    --primary:         #6366f1;
    --primary-glow:    rgba(99, 102, 241, .25);
    --primary-hover:   #818cf8;
    --primary-soft:    rgba(99, 102, 241, .08);
    --red:             #f87171;
    --red-deep:        #ef4444;
    --red-bg:          rgba(239, 68, 68, .06);
    --red-border:      rgba(239, 68, 68, .15);
    --blue:            #60a5fa;
    --blue-deep:       #3b82f6;
    --blue-bg:         rgba(59, 130, 246, .06);
    --blue-border:     rgba(59, 130, 246, .15);
    --green:           #34d399;
    --green-deep:      #22c55e;
    --yellow:          #fbbf24;
    --radius:          10px;
    --radius-lg:       14px;
    --shadow-sm:       0 2px 8px rgba(0,0,0,.3);
    --shadow-md:       0 4px 20px rgba(0,0,0,.4);
    --shadow-lg:       0 8px 40px rgba(0,0,0,.5);
    --shadow-glow:     0 0 30px rgba(99,102,241,.08);
    --font:            'Inter', system-ui, -apple-system, sans-serif;
    --mono:            'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
    --transition:      .25s cubic-bezier(.4, 0, .2, 1);
}

/* ═══ LIGHT THEME OVERRIDES ════════════════════════════════ */
[data-theme="light"] {
    --bg:              #f4f5f9;
    --bg-gradient:     linear-gradient(145deg, #f4f5f9 0%, #e8eaf0 50%, #f0f1f6 100%);
    --surface:         #ffffff;
    --surface-glass:   rgba(255, 255, 255, .82);
    --card:            #ffffff;
    --card-hover:      #f0f0f8;
    --border:          rgba(99, 102, 241, .15);
    --border-subtle:   rgba(0, 0, 0, .06);
    --text:            #1a1a2e;
    --text-secondary:  #4a4a6a;
    --text-muted:      #8888a8;
    --primary:         #5b5ef0;
    --primary-glow:    rgba(91, 94, 240, .18);
    --primary-hover:   #6366f1;
    --primary-soft:    rgba(99, 102, 241, .08);
    --red:             #dc2626;
    --red-deep:        #b91c1c;
    --red-bg:          rgba(239, 68, 68, .06);
    --red-border:      rgba(239, 68, 68, .18);
    --blue:            #2563eb;
    --blue-deep:       #1d4ed8;
    --blue-bg:         rgba(59, 130, 246, .06);
    --blue-border:     rgba(59, 130, 246, .18);
    --green:           #16a34a;
    --green-deep:      #15803d;
    --yellow:          #d97706;
    --shadow-sm:       0 1px 4px rgba(0,0,0,.08);
    --shadow-md:       0 2px 12px rgba(0,0,0,.08);
    --shadow-lg:       0 4px 24px rgba(0,0,0,.1);
    --shadow-glow:     0 0 20px rgba(99,102,241,.06);
}

[data-theme="light"] body::before { opacity: 0; }

[data-theme="light"] #loading-overlay {
    background: rgba(244, 245, 249, .92);
}

[data-theme="light"] header h1 {
    background: linear-gradient(135deg, #1a1a2e 0%, #5b5ef0 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

[data-theme="light"] .brand-icon {
    color: #5b5ef0;
    filter: none;
}

[data-theme="light"] .brand-sub {
    color: var(--text-muted);
}

[data-theme="light"] .settings-btn {
    background: rgba(0,0,0,.04);
    border-color: rgba(0,0,0,.1);
}

[data-theme="light"] .settings-menu {
    background: #fff;
    border-color: rgba(0,0,0,.1);
    box-shadow: 0 8px 32px rgba(0,0,0,.12);
}

[data-theme="light"] .custom-tooltip {
    background: #fff;
    border-color: rgba(0,0,0,.1);
    box-shadow: 0 8px 24px rgba(0,0,0,.12);
}

[data-theme="light"] ::-webkit-scrollbar-track {
    background: #f0f1f6;
}

[data-theme="light"] ::-webkit-scrollbar-thumb {
    background: rgba(99,102,241,.25);
}

[data-theme="light"] ::selection {
    background: rgba(99,102,241,.2);
    color: #1a1a2e;
}

*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

html { scroll-behavior: smooth; }

body {
    font-family: var(--font);
    background: var(--bg-gradient);
    background-attachment: fixed;
    color: var(--text);
    min-height: 100vh;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Subtle noise overlay */
body::before {
    content: '';
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='.02'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 0;
}

body > * { position: relative; z-index: 1; }

/* ═══ HEADER ═══════════════════════════════════════════════ */
header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: .85rem 2.5rem;
    background: var(--surface-glass);
    backdrop-filter: blur(20px) saturate(1.4);
    -webkit-backdrop-filter: blur(20px) saturate(1.4);
    border-bottom: 1px solid var(--border);
    box-shadow: 0 1px 20px rgba(0,0,0,.3);
    position: relative;
    z-index: 1000;
}

.header-brand {
    display: flex;
    align-items: center;
    gap: .75rem;
}

.brand-icon {
    color: var(--primary);
    flex-shrink: 0;
    filter: drop-shadow(0 0 8px var(--primary-glow));
}

.brand-text {
    display: flex;
    flex-direction: column;
    line-height: 1.15;
}

header h1 {
    font-size: 1.15rem;
    font-weight: 800;
    letter-spacing: -.02em;
    background: linear-gradient(135deg, #e8ecf4 0%, #6366f1 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.brand-sub {
    font-size: .68rem;
    font-weight: 500;
    color: var(--text-muted);
    letter-spacing: .04em;
}

#event-badge {
    background: linear-gradient(135deg, var(--primary) 0%, #818cf8 100%);
    color: #fff;
    padding: .3rem 1.1rem;
    border-radius: 999px;
    font-size: .78rem;
    font-weight: 600;
    letter-spacing: .01em;
    box-shadow: 0 2px 12px var(--primary-glow);
    animation: badge-in .4s ease-out;
    transition: background .4s ease, box-shadow .4s ease;
}
#event-badge.status-ongoing {
    background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
    box-shadow: 0 2px 12px rgba(16,185,129,.35);
}
#event-badge.status-upcoming {
    background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
    box-shadow: 0 2px 12px rgba(245,158,11,.35);
    color: #1a1a2e;
}
#event-badge.status-completed {
    background: linear-gradient(135deg, #6b7280 0%, #9ca3af 100%);
    box-shadow: 0 2px 12px rgba(107,114,128,.25);
}
@keyframes badge-in {
    from { opacity: 0; transform: translateY(-6px) scale(.9); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
}

/* ═══ HEADER RIGHT / SETTINGS ══════════════════════════════ */
.header-right {
    display: flex;
    align-items: center;
    gap: .75rem;
}

.settings-wrapper {
    position: relative;
}

.settings-btn {
    background: rgba(255,255,255,.06);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: .45rem;
    cursor: pointer;
    color: var(--text-muted);
    transition: var(--transition);
    display: flex;
    align-items: center;
    justify-content: center;
}
.settings-btn:hover {
    background: var(--primary-soft);
    color: var(--text);
    border-color: rgba(99,102,241,.3);
}

.settings-menu {
    position: absolute;
    top: calc(100% + 8px);
    right: 0;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: .75rem 1rem;
    min-width: 240px;
    box-shadow: 0 8px 32px rgba(0,0,0,.5);
    z-index: 9999;
}
.settings-menu.hidden { display: none; }

.settings-title {
    font-size: .72rem;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: .06em;
    margin-bottom: .6rem;
    padding-bottom: .4rem;
    border-bottom: 1px solid var(--border);
}

.settings-toggle {
    display: flex;
    align-items: center;
    gap: .6rem;
    cursor: pointer;
    padding: .35rem 0;
}
.settings-toggle input { display: none; }

.toggle-slider {
    width: 34px;
    height: 18px;
    background: rgba(255,255,255,.1);
    border-radius: 999px;
    position: relative;
    transition: var(--transition);
    flex-shrink: 0;
}
.toggle-slider::after {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 14px;
    height: 14px;
    background: var(--text-muted);
    border-radius: 50%;
    transition: var(--transition);
}
.settings-toggle input:checked + .toggle-slider {
    background: var(--primary);
}
.settings-toggle input:checked + .toggle-slider::after {
    transform: translateX(16px);
    background: #fff;
}

.toggle-label {
    font-size: .82rem;
    font-weight: 500;
    color: var(--text-secondary);
}

/* ═══ FOREIGN TEAM HIGHLIGHT ═══════════════════════════════ */
.team-badge.foreign-team,
.team-num.foreign-team {
    outline: 2px solid var(--yellow);
    outline-offset: 1px;
    border-radius: 4px;
}

/* ═══ TAB BAR ══════════════════════════════════════════════ */
.tabs {
    display: flex;
    background: var(--surface-glass);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border-bottom: 1px solid var(--border);
    padding: 0 2.5rem;
    gap: .25rem;
}

.tab {
    position: relative;
    background: none;
    border: none;
    color: var(--text-muted);
    padding: .85rem 1.5rem;
    font-family: var(--font);
    font-size: .88rem;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
    letter-spacing: .01em;
}

.tab:hover {
    color: var(--text-secondary);
    background: var(--primary-soft);
    border-radius: var(--radius) var(--radius) 0 0;
}

.tab.active {
    color: var(--primary-hover);
    font-weight: 600;
    background: var(--primary-soft);
    border-radius: var(--radius) var(--radius) 0 0;
}

.tab.active::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: .5rem; right: .5rem;
    height: 2.5px;
    background: var(--primary);
    border-radius: 3px 3px 0 0;
    box-shadow: 0 0 10px var(--primary-glow);
}

.tab-icon {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
    stroke-width: 2;
    opacity: .7;
    transition: opacity var(--transition);
}

.tab:hover .tab-icon,
.tab.active .tab-icon {
    opacity: 1;
}

/* ═══ MAIN CONTAINER ═══════════════════════════════════════ */
main {
    padding: 2rem 2.5rem;
    max-width: 1440px;
    margin: 0 auto;
}

.tab-content {
    display: none;
    animation: tab-fade .35s ease-out;
}
.tab-content.active { display: block; }
@keyframes tab-fade {
    from { opacity: 0; transform: translateY(8px); }
    to   { opacity: 1; transform: translateY(0); }
}

.hidden { display: none !important; }

/* ═══ INPUTS & BUTTONS ════════════════════════════════════ */
.input-row {
    display: flex;
    gap: .75rem;
    align-items: center;
    margin-bottom: 1.6rem;
    flex-wrap: wrap;
}

input[type="text"] {
    background: var(--card);
    border: 1px solid var(--border);
    color: var(--text);
    padding: .65rem 1.1rem;
    border-radius: var(--radius);
    font-family: var(--font);
    font-size: .9rem;
    outline: none;
    transition: var(--transition);
    box-shadow: var(--shadow-sm);
}

input[type="text"]::placeholder {
    color: var(--text-muted);
    font-weight: 400;
}

input[type="text"]:focus {
    border-color: var(--primary);
    box-shadow: var(--shadow-sm), 0 0 0 3px var(--primary-glow);
}

input[type="text"].input-sm {
    max-width: 130px;
}

button {
    background: linear-gradient(135deg, var(--primary) 0%, #7c7ff7 100%);
    color: #fff;
    border: none;
    padding: .65rem 1.6rem;
    border-radius: var(--radius);
    font-family: var(--font);
    font-size: .88rem;
    cursor: pointer;
    font-weight: 600;
    transition: var(--transition);
    white-space: nowrap;
    box-shadow: 0 2px 10px var(--primary-glow);
    letter-spacing: .01em;
}

button:hover {
    background: linear-gradient(135deg, #7c7ff7 0%, var(--primary-hover) 100%);
    box-shadow: 0 4px 18px var(--primary-glow);
    transform: translateY(-1px);
}

button:active {
    transform: translateY(0);
    box-shadow: 0 1px 6px var(--primary-glow);
}

/* ═══ EVENT INFO CARD ══════════════════════════════════════ */
.event-info-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 1.3rem 1.6rem;
    margin-bottom: 1.6rem;
    box-shadow: var(--shadow-md);
    position: relative;
    overflow: hidden;
}

.event-info-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--primary) 0%, var(--primary-hover) 50%, var(--blue) 100%);
}

.event-info-card h2 {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: .35rem;
    letter-spacing: -.01em;
}

.event-info-card p {
    color: var(--text-secondary);
    font-size: .88rem;
    line-height: 1.7;
}

/* ═══ ACTIVE EVENT BANNER ══════════════════════════════════ */
.active-event-banner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: linear-gradient(135deg, rgba(99,102,241,.1) 0%, rgba(99,102,241,.04) 100%);
    border: 1px solid rgba(99,102,241,.25);
    border-radius: var(--radius-lg);
    padding: .85rem 1.3rem;
    margin-bottom: 1.2rem;
    gap: 1rem;
    animation: banner-in .35s ease-out;
}
@keyframes banner-in {
    from { opacity: 0; transform: translateY(-4px); }
    to   { opacity: 1; transform: translateY(0); }
}
.aeb-left {
    display: flex;
    align-items: center;
    gap: .75rem;
    min-width: 0;
}
.aeb-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--green);
    box-shadow: 0 0 8px rgba(52,211,153,.5);
    flex-shrink: 0;
    animation: dot-pulse 2s ease-in-out infinite;
}
.aeb-dot.dot-ongoing {
    background: #10b981;
    box-shadow: 0 0 8px rgba(16,185,129,.5);
}
.aeb-dot.dot-upcoming {
    background: #f59e0b;
    box-shadow: 0 0 8px rgba(245,158,11,.5);
    animation: dot-pulse-amber 2s ease-in-out infinite;
}
.aeb-dot.dot-completed {
    background: #6b7280;
    box-shadow: 0 0 6px rgba(107,114,128,.3);
    animation: none;
}
@keyframes dot-pulse {
    0%, 100% { box-shadow: 0 0 8px rgba(52,211,153,.5); }
    50% { box-shadow: 0 0 14px rgba(52,211,153,.8); }
}
@keyframes dot-pulse-amber {
    0%, 100% { box-shadow: 0 0 8px rgba(245,158,11,.4); }
    50% { box-shadow: 0 0 14px rgba(245,158,11,.7); }
}
.aeb-info {
    display: flex;
    flex-direction: column;
    min-width: 0;
}
.aeb-name {
    font-size: .92rem;
    font-weight: 700;
    color: var(--text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.aeb-meta {
    font-size: .78rem;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    gap: .45rem;
    flex-wrap: wrap;
}
.aeb-status-badge {
    display: inline-block;
    font-size: .62rem;
    font-weight: 700;
    letter-spacing: .04em;
    text-transform: uppercase;
    padding: .15rem .55rem;
    border-radius: 999px;
    line-height: 1.1;
    color: #fff;
    vertical-align: middle;
}
.aeb-status-badge.status-ongoing {
    background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
    box-shadow: 0 1px 6px rgba(16,185,129,.35);
}
.aeb-status-badge.status-upcoming {
    background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
    box-shadow: 0 1px 6px rgba(245,158,11,.35);
    color: #1a1a2e;
}
.aeb-status-badge.status-completed {
    background: linear-gradient(135deg, #6b7280 0%, #9ca3af 100%);
    box-shadow: 0 1px 6px rgba(107,114,128,.25);
}
.aeb-status-badge.status-unknown {
    background: linear-gradient(135deg, var(--primary) 0%, #818cf8 100%);
    box-shadow: 0 1px 6px var(--primary-glow);
}
.aeb-change-btn {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--text-muted);
    padding: .35rem .8rem;
    font-size: .75rem;
    font-weight: 500;
    border-radius: var(--radius);
    box-shadow: none;
}
.aeb-change-btn:hover {
    background: rgba(239,68,68,.08);
    border-color: rgba(239,68,68,.3);
    color: var(--red);
    box-shadow: none;
    transform: none;
}

/* ═══ EVENT SELECTION — SEASON PICKER ═════════════════════ */
.event-section-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 1.3rem 1.6rem;
    margin-bottom: 1.2rem;
    box-shadow: var(--shadow-sm);
}
.event-section-card .input-row { margin-bottom: 0; }
.event-section-alt {
    background: var(--surface);
    border-color: var(--border-subtle);
}
.event-section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
}
.event-section-header.clickable {
    cursor: pointer;
    user-select: none;
}
.event-section-header.clickable:hover .event-section-title {
    color: var(--primary-hover);
}
.event-section-title {
    font-size: .95rem;
    font-weight: 700;
    color: var(--text);
    margin: 0;
    transition: color .2s;
}
.event-section-desc {
    font-size: .8rem;
    color: var(--text-muted);
    margin: .4rem 0 .8rem 0;
    line-height: 1.5;
}
.season-count-badge {
    font-size: .7rem;
    font-weight: 600;
    color: var(--primary);
    background: var(--primary-soft);
    border: 1px solid rgba(99,102,241,.2);
    padding: .15rem .55rem;
    border-radius: 999px;
}
.season-header-right {
    display: flex;
    align-items: center;
    gap: .4rem;
}
.season-refresh-btn {
    background: var(--primary-soft);
    border: 1px solid rgba(99,102,241,.2);
    color: var(--primary);
    font-size: .72rem;
    font-weight: 600;
    line-height: 1;
    padding: .15rem .55rem;
    border-radius: 999px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: background .2s, transform .2s;
}
.season-refresh-btn:hover {
    background: rgba(99,102,241,.18);
}
.season-refresh-btn.spinning {
    animation: spin .8s linear infinite;
}
@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Collapsible manual entry */
.manual-entry-body {
    overflow: hidden;
    max-height: 200px;
    opacity: 1;
    transition: max-height .3s ease, opacity .2s ease, margin .2s ease;
    margin-top: .4rem;
}
.manual-entry-body.collapsed {
    max-height: 0;
    opacity: 0;
    margin-top: 0;
}

.season-controls {
    display: flex;
    flex-direction: column;
    gap: .65rem;
}
.season-filter-row {
    display: flex;
    gap: .6rem;
    flex-wrap: wrap;
}
.season-filter-row select {
    background: var(--bg);
    border: 1px solid var(--border);
    color: var(--text);
    padding: .5rem .9rem;
    border-radius: var(--radius);
    font-family: var(--font);
    font-size: .85rem;
    cursor: pointer;
    min-width: 160px;
    outline: none;
    transition: var(--transition);
}
.season-filter-row select:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px var(--primary-glow);
}
.season-search-wrap {
    position: relative;
}
.season-search-wrap input {
    width: 100%;
    box-sizing: border-box;
    padding-left: 2.4rem;
}
.search-icon {
    position: absolute;
    left: .8rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
    pointer-events: none;
    z-index: 1;
}
.season-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    max-height: 320px;
    overflow-y: auto;
    background: var(--card);
    border: 1px solid var(--border);
    border-top: none;
    border-radius: 0 0 var(--radius) var(--radius);
    box-shadow: var(--shadow-md);
    z-index: 100;
}
.season-dropdown-item {
    padding: .6rem 1rem;
    cursor: pointer;
    font-size: .85rem;
    color: var(--text);
    transition: background .15s;
    display: flex;
    align-items: center;
    gap: .75rem;
    border-bottom: 1px solid var(--border-subtle);
}
.season-dropdown-item:last-child { border-bottom: none; }
.season-dropdown-item:hover,
.season-dropdown-item.highlighted {
    background: var(--primary-glow);
}
.sdi-name {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-weight: 500;
}
.sdi-week {
    font-size: .7rem;
    font-weight: 600;
    color: var(--primary);
    background: var(--primary-soft);
    padding: .1rem .45rem;
    border-radius: 4px;
    white-space: nowrap;
    flex-shrink: 0;
}
.sdi-loc {
    font-size: .75rem;
    color: var(--text-muted);
    white-space: nowrap;
    flex-shrink: 0;
}
.season-status {
    font-size: .78rem;
    color: var(--text-muted);
    margin-top: .5rem;
}

/* ═══ DATA TABLES ══════════════════════════════════════════ */
.data-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    background: var(--card);
    border-radius: var(--radius-lg);
    overflow: hidden;
    font-size: .86rem;
    box-shadow: var(--shadow-md);
    border: 1px solid var(--border);
}

.data-table thead {
    background: linear-gradient(180deg, rgba(99,102,241,.08) 0%, var(--surface) 100%);
}

.data-table th {
    padding: .75rem 1.1rem;
    text-align: left;
    font-weight: 600;
    color: var(--text-muted);
    font-size: .72rem;
    text-transform: uppercase;
    letter-spacing: .06em;
    border-bottom: 1px solid var(--border);
}
.sortable-th {
    cursor: pointer;
    user-select: none;
    transition: color .2s;
    white-space: nowrap;
}
.sortable-th:hover {
    color: var(--text);
}
.sortable-th.sorted {
    color: var(--primary);
}

.data-table td {
    padding: .6rem 1.1rem;
    border-bottom: 1px solid var(--border-subtle);
    transition: background var(--transition);
}

.data-table tbody tr {
    transition: background var(--transition);
}

.data-table tbody tr:hover {
    background: var(--primary-soft);
}

.data-table tbody tr:last-child td {
    border-bottom: none;
}

.data-table .rank {
    font-weight: 700;
    color: var(--primary-hover);
    font-family: var(--mono);
}

.data-table .team-num {
    font-weight: 700;
    font-family: var(--mono);
    color: var(--text);
}

.team-avatar-cell {
    padding: .35rem .4rem !important;
    width: 36px;
    text-align: center;
}

.team-avatar {
    width: 32px;
    height: 32px;
    border-radius: var(--radius);
    vertical-align: middle;
    object-fit: contain;
    background: var(--surface);
}

.team-avatar-placeholder {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: .55rem;
    font-weight: 700;
    font-family: var(--mono);
    color: var(--text-muted);
    background: var(--surface);
    border: 1px solid var(--border-subtle);
}

.data-table .stat {
    font-family: var(--mono);
    font-size: .82rem;
}

.data-table .location {
    color: var(--text-muted);
    font-size: .8rem;
}

.data-table.compact td,
.data-table.compact th { padding: .4rem .75rem; }
.data-table.compact    { font-size: .82rem; }

.stat-opr { color: var(--green) !important; }
.stat-dpr { color: var(--red) !important; }

.winner-text { color: var(--green); font-weight: 700; }

/* ═══ PLAYOFF ROUND NAV ═══════════════════════════════════ */
/* ═══ BRACKET NAV ══════════════════════════════════════════ */
.bracket-nav {
    display: flex;
    gap: .5rem;
    margin-bottom: 1rem;
    padding: .35rem;
    background: var(--card);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border);
    width: fit-content;
}

.bracket-btn {
    background: transparent;
    border: 1px solid transparent;
    color: var(--text-muted);
    padding: .5rem 1.3rem;
    border-radius: 8px;
    cursor: pointer;
    font-family: var(--font);
    font-size: .85rem;
    font-weight: 500;
    transition: var(--transition);
}

.bracket-btn:hover {
    background: var(--primary-soft);
    color: var(--text);
}

.bracket-btn.active {
    background: linear-gradient(135deg, var(--primary) 0%, #7c7ff7 100%);
    color: #fff;
    font-weight: 600;
    box-shadow: 0 2px 12px var(--primary-glow);
}

.bracket-tag {
    display: inline-block;
    font-size: .7rem;
    font-weight: 600;
    padding: .15rem .55rem;
    border-radius: 4px;
    margin-left: .5rem;
    vertical-align: middle;
}
.bracket-tag.upper {
    background: rgba(99, 102, 241, .15);
    color: #818cf8;
}
.bracket-tag.lower {
    background: rgba(245, 158, 11, .15);
    color: #fbbf24;
}
.bracket-tag.final {
    background: rgba(16, 185, 129, .15);
    color: #34d399;
}

/* ═══ ROUND NAV ════════════════════════════════════════════ */
.round-nav {
    display: flex;
    gap: .5rem;
    margin-bottom: 1.6rem;
    padding: .35rem;
    background: var(--card);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border);
    width: fit-content;
}

.round-btn {
    background: transparent;
    border: 1px solid transparent;
    color: var(--text-muted);
    padding: .5rem 1.3rem;
    border-radius: 8px;
    cursor: pointer;
    font-family: var(--font);
    font-size: .85rem;
    font-weight: 500;
    transition: var(--transition);
}

.round-btn:hover {
    background: var(--primary-soft);
    color: var(--text);
}

.round-btn.active {
    background: linear-gradient(135deg, var(--primary) 0%, #7c7ff7 100%);
    color: #fff;
    font-weight: 600;
    box-shadow: 0 2px 12px var(--primary-glow);
}

/* ═══ SERIES / MATCH CARDS ═════════════════════════════════ */
.series-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    margin-bottom: 1.1rem;
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    transition: var(--transition);
}

.series-card:hover {
    box-shadow: var(--shadow-md);
    border-color: rgba(99,102,241,.2);
}

.series-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: .8rem 1.3rem;
    background: linear-gradient(180deg, rgba(99,102,241,.06) 0%, transparent 100%);
    border-bottom: 1px solid var(--border);
}

.series-title {
    font-weight: 700;
    font-size: .95rem;
    letter-spacing: -.01em;
}

.series-score {
    display: flex;
    gap: .6rem;
    align-items: center;
    font-weight: 800;
    font-size: 1.1rem;
    font-family: var(--mono);
}

.red-text  { color: var(--red); }
.blue-text { color: var(--blue); }

.match-card {
    padding: .8rem 1.3rem;
    border-bottom: 1px solid var(--border-subtle);
    transition: background var(--transition);
}

.match-card:hover {
    background: rgba(99,102,241,.03);
}

.match-card:last-child { border-bottom: none; }
.match-card.upcoming   { opacity: .45; }

.match-label {
    font-size: .74rem;
    color: var(--text-muted);
    margin-bottom: .5rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: .05em;
}

.match-alliances {
    display: flex;
    flex-direction: column;
    gap: .45rem;
}

.alliance {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: .55rem .9rem;
    border-radius: 8px;
    transition: var(--transition);
}

.alliance.red {
    background: var(--red-bg);
    border: 1px solid var(--red-border);
}

.alliance.blue {
    background: var(--blue-bg);
    border: 1px solid var(--blue-border);
}

.alliance.winner {
    box-shadow: inset 3px 0 0 var(--green), 0 0 12px rgba(34,211,153,.06);
}

.alliance-teams {
    display: flex;
    gap: .4rem;
    flex: 1;
}

.team-badge {
    padding: .2rem .65rem;
    border-radius: 6px;
    font-weight: 700;
    font-family: var(--mono);
    font-size: .82rem;
    letter-spacing: .02em;
}

.red-badge {
    background: rgba(248,113,113,.12);
    color: var(--red);
    border: 1px solid rgba(248,113,113,.15);
}

.blue-badge {
    background: rgba(96,165,250,.12);
    color: var(--blue);
    border: 1px solid rgba(96,165,250,.15);
}

.alliance-score {
    font-size: 1.35rem;
    font-weight: 800;
    font-family: var(--mono);
    min-width: 52px;
    text-align: right;
    letter-spacing: -.02em;
}

.alliance-opr {
    font-size: .76rem;
    color: var(--text-muted);
    min-width: 64px;
    text-align: right;
    font-family: var(--mono);
}

/* ═══ ALLIANCE SELECTION GRID ═════════════════════════════ */
#alliance-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
    gap: 1.1rem;
}

.alliance-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
    transition: var(--transition);
}

.alliance-card:hover {
    box-shadow: var(--shadow-md), var(--shadow-glow);
    border-color: rgba(99,102,241,.2);
    margin-top: -2px;
    margin-bottom: 2px;
}

.alliance-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: .8rem 1.3rem;
    background: linear-gradient(180deg, rgba(99,102,241,.06) 0%, transparent 100%);
    border-bottom: 1px solid var(--border);
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}

.alliance-header h3 {
    font-size: .95rem;
    font-weight: 700;
    letter-spacing: -.01em;
}

.combined-opr {
    font-family: var(--mono);
    font-size: .82rem;
    color: var(--primary-hover);
    font-weight: 600;
    background: var(--primary-soft);
    padding: .2rem .7rem;
    border-radius: 999px;
}

.alliance-teams-list { padding: .5rem; }

.alliance-team-row {
    display: flex;
    align-items: center;
    gap: .8rem;
    padding: .55rem .75rem;
    border-radius: 8px;
    transition: background var(--transition);
}

.alliance-team-row:hover {
    background: var(--primary-soft);
}

.team-role {
    font-size: .68rem;
    color: var(--text-muted);
    min-width: 56px;
    text-transform: uppercase;
    letter-spacing: .05em;
    font-weight: 600;
}

.alliance-team-row .team-num {
    font-weight: 800;
    font-family: var(--mono);
    font-size: 1rem;
    min-width: 50px;
    color: var(--text);
}

.team-stats-mini {
    display: flex;
    gap: .8rem;
    font-size: .76rem;
    color: var(--text-muted);
    font-family: var(--mono);
}

.partner-badges {
    margin-left: auto;
    display: flex;
    gap: .35rem;
    flex-wrap: wrap;
}

.badge {
    font-size: .66rem;
    padding: .15rem .55rem;
    border-radius: 999px;
    white-space: nowrap;
    font-weight: 600;
    letter-spacing: .01em;
}

.badge.first-time {
    background: rgba(251,191,36,.12);
    color: var(--yellow);
    border: 1px solid rgba(251,191,36,.2);
}

.badge.returning {
    background: rgba(52,211,153,.1);
    color: var(--green);
    border: 1px solid rgba(52,211,153,.18);
}

/* ═══ PARTNERSHIP TOOLTIP ══════════════════════════════════ */
.has-tooltip {
    position: relative;
    cursor: pointer;
}

.custom-tooltip {
    display: none;
    position: fixed;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: .55rem .75rem;
    min-width: 220px;
    max-width: 340px;
    z-index: 9999;
    box-shadow: 0 8px 24px rgba(0,0,0,.45);
    pointer-events: none;
}

.has-tooltip:hover .custom-tooltip {
    display: block;
}

.custom-tooltip::after {
    content: '';
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
}

.custom-tooltip.above::after {
    top: 100%;
    border-top-color: var(--border);
}

.custom-tooltip.below::after {
    bottom: 100%;
    border-bottom-color: var(--border);
}

.tip-row {
    font-size: .72rem;
    font-weight: 500;
    color: var(--text);
    padding: .18rem 0;
    white-space: nowrap;
    line-height: 1.4;
}

/* ═══ TEAM STATS ═══════════════════════════════════════════ */
.team-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 1.6rem;
    margin-bottom: 1.6rem;
    box-shadow: var(--shadow-md);
    position: relative;
    overflow: hidden;
}

.team-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--primary), var(--blue), var(--green));
}

.team-header h2 {
    font-size: 1.3rem;
    font-weight: 800;
    margin-bottom: .3rem;
    letter-spacing: -.02em;
}

.team-header p {
    color: var(--text-secondary);
    font-size: .88rem;
    margin-bottom: .15rem;
}

.team-highlights {
    display: flex;
    gap: 1.1rem;
    margin: 1.3rem 0;
}

.highlight-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 1rem 1.4rem;
    flex: 1;
    transition: var(--transition);
    position: relative;
    overflow: hidden;
}

.highlight-card::after {
    content: '';
    position: absolute;
    bottom: 0; left: 10%; right: 10%;
    height: 2px;
    background: var(--primary);
    border-radius: 2px;
    opacity: 0;
    transition: var(--transition);
}

.highlight-card:hover::after { opacity: 1; }
.highlight-card:hover { border-color: rgba(99,102,241,.2); }

.highlight-label {
    font-size: .72rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: .06em;
    margin-bottom: .3rem;
    font-weight: 600;
}

.highlight-value {
    font-size: 1.15rem;
    font-weight: 700;
    color: var(--primary-hover);
    letter-spacing: -.01em;
}

.team-card h3 {
    margin: 1.3rem 0 .8rem;
    font-size: .95rem;
    font-weight: 700;
    letter-spacing: -.01em;
}

/* ═══ HEAD TO HEAD ═════════════════════════════════════════ */
.h2h-section {
    margin-top: 2.5rem;
    padding-top: 2.5rem;
    border-top: 1px solid var(--border);
}

.h2h-section h3 {
    margin-bottom: 1.1rem;
    font-weight: 700;
    letter-spacing: -.01em;
}

.h2h-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 1.8rem;
    box-shadow: var(--shadow-md);
}

.h2h-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1.2rem;
    font-size: 1.5rem;
    font-weight: 800;
    font-family: var(--mono);
    margin-bottom: 1rem;
    letter-spacing: -.02em;
}

.vs-label {
    color: var(--text-muted);
    font-weight: 500;
    font-size: .85rem;
    font-family: var(--font);
    text-transform: uppercase;
    letter-spacing: .08em;
}

.h2h-summary {
    text-align: center;
    margin-bottom: 1.2rem;
    padding: .8rem;
    background: var(--surface);
    border-radius: var(--radius);
    border: 1px solid var(--border);
}

.h2h-score {
    display: flex;
    justify-content: center;
    gap: 2rem;
    font-size: 1.1rem;
    margin-top: .5rem;
    font-family: var(--mono);
    font-weight: 700;
}

.h2h-card h4 {
    margin: 1.2rem 0 .7rem;
    font-size: .9rem;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: .04em;
}

.muted {
    color: var(--text-muted);
    font-size: .82rem;
}

/* ═══ LOADING OVERLAY ═════════════════════════════════════ */
#loading-overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(6,6,14,.9);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.spinner {
    width: 42px;
    height: 42px;
    border: 3px solid rgba(99,102,241,.15);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spin .8s cubic-bezier(.4, .15, .6, .85) infinite;
}

@keyframes spin { to { transform: rotate(360deg); } }

#loading-overlay p {
    margin-top: 1rem;
    color: var(--text-muted);
    font-size: .9rem;
    font-weight: 500;
}

.loading-msg {
    text-align: center;
    color: var(--text-muted);
    padding: 1.2rem;
    font-weight: 500;
}

.empty {
    color: var(--text-muted);
    text-align: center;
    padding: 3rem 2rem;
    font-style: italic;
    font-size: .9rem;
    background: var(--card);
    border-radius: var(--radius-lg);
    border: 1px dashed var(--border);
}

/* ═══ PLAY BY PLAY ═════════════════════════════════════════ */
.pbp-topbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
    padding: .8rem 1.2rem;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
}

.pbp-nav-btn {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--text);
    padding: .55rem 1.3rem;
    border-radius: 8px;
    cursor: pointer;
    font-family: var(--font);
    font-size: .88rem;
    font-weight: 600;
    transition: var(--transition);
    box-shadow: none;
}
.pbp-nav-btn:hover {
    background: var(--primary-soft);
    border-color: rgba(99,102,241,.3);
    color: var(--primary-hover);
    transform: none;
    box-shadow: none;
}

.pbp-match-info {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: .35rem;
}

.pbp-match-label {
    font-size: 1.1rem;
    font-weight: 800;
    letter-spacing: -.02em;
    color: var(--text);
}

.pbp-selector-row select {
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text);
    padding: .35rem .8rem;
    border-radius: 6px;
    font-family: var(--font);
    font-size: .82rem;
    outline: none;
    cursor: pointer;
}

/* ── Arena: split red / blue ─────────────────────────────── */
.pbp-arena {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.2rem;
}

.pbp-alliance {
    border-radius: var(--radius-lg);
    overflow: hidden;
    border: 1px solid var(--border);
    box-shadow: var(--shadow-md);
}

.pbp-alliance.red-side {
    border-top: 3px solid var(--red);
}
.pbp-alliance.blue-side {
    border-top: 3px solid var(--blue);
}

.pbp-alliance-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: .75rem 1.3rem;
}

.pbp-alliance.red-side .pbp-alliance-header {
    background: var(--red-bg);
}
.pbp-alliance.blue-side .pbp-alliance-header {
    background: var(--blue-bg);
}

.pbp-alliance-title {
    font-size: .88rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: .04em;
}
.red-side .pbp-alliance-title { color: var(--red); }
.blue-side .pbp-alliance-title { color: var(--blue); }

.pbp-alliance-score {
    font-size: 1.6rem;
    font-weight: 900;
    font-family: var(--mono);
    letter-spacing: -.03em;
}
.red-side .pbp-alliance-score { color: var(--red); }
.blue-side .pbp-alliance-score { color: var(--blue); }

.pbp-alliance-opr {
    font-size: .76rem;
    color: var(--text-muted);
    font-family: var(--mono);
}

.pbp-alliance-won .pbp-alliance-score {
    color: var(--green) !important;
}
.pbp-alliance-won .pbp-alliance-header {
    background: rgba(34,197,94,.06) !important;
}
.pbp-alliance-won {
    border-top-color: var(--green) !important;
    box-shadow: var(--shadow-md), 0 0 16px rgba(34,197,94,.1);
}

/* ── Team card inside alliance ───────────────────────────── */
.pbp-team-cards {
    display: flex;
    flex-direction: column;
}

.pbp-team {
    padding: 1rem 1.3rem;
    border-bottom: 1px solid var(--border-subtle);
    background: var(--card);
    transition: background var(--transition);
}
.pbp-team:last-child { border-bottom: none; }
.pbp-team:hover { background: var(--card-hover); }

.pbp-team-top {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: .5rem;
}

.pbp-team-number {
    font-size: 1.8rem;
    font-weight: 900;
    font-family: var(--mono);
    letter-spacing: -.03em;
    min-width: 80px;
}
.red-side .pbp-team-number { color: var(--red); }
.blue-side .pbp-team-number { color: var(--blue); }

.pbp-team-identity {
    flex: 1;
    min-width: 0;
}

.pbp-team-nickname {
    font-size: 1.15rem;
    font-weight: 800;
    letter-spacing: -.01em;
    color: var(--text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.pbp-team-school {
    font-size: .78rem;
    color: var(--text-muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.pbp-team-location {
    font-size: .76rem;
    color: var(--text-muted);
    margin-top: .1rem;
}

.pbp-team-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
    gap: .5rem;
    margin-top: .6rem;
}

.pbp-stat {
    background: var(--surface);
    border: 1px solid var(--border-subtle);
    border-radius: 6px;
    padding: .35rem .6rem;
    text-align: center;
}

.pbp-stat-label {
    font-size: .62rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: .06em;
}

.pbp-stat-value {
    font-size: .88rem;
    font-weight: 700;
    font-family: var(--mono);
    color: var(--text);
}

.pbp-stat-value.opr-val { color: var(--green); }
.pbp-stat-value.dpr-val { color: var(--red); }

.pbp-team-highscore {
    font-size: .72rem;
    color: var(--primary-hover);
    margin-top: .4rem;
    font-weight: 600;
}

/* ── Footer ──────────────────────────────────────────────── */
.pbp-footer {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 1.2rem;
    padding: .7rem 1.2rem;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    text-align: center;
}

.pbp-footer-text {
    font-size: .82rem;
    color: var(--text-muted);
    font-family: var(--mono);
}

.pbp-footer-score { font-weight: 700; color: var(--primary-hover); }

/* ═══ SITE FOOTER ═════════════════════════════════════════ */
/* ═══ SCORE BREAKDOWN ════════════════════════════════════ */
.bd-status {
    text-align: center;
    padding: .5rem;
    font-size: .85rem;
    color: var(--text-muted);
}
.bd-status .bd-available { color: #22c55e; font-weight: 600; }
.bd-status .bd-unavailable { color: var(--text-muted); font-style: italic; }

.bd-content {
    display: flex;
    gap: 1rem;
    margin-top: .5rem;
}

.bd-alliance {
    flex: 1;
    border: 2px solid var(--border);
    border-radius: var(--radius);
    overflow: hidden;
}
.bd-alliance.red-side   { border-color: var(--red-border); }
.bd-alliance.blue-side  { border-color: var(--blue-border); }

.bd-alliance-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: .6rem 1rem;
    font-weight: 700;
    font-size: 1rem;
}
.bd-alliance.red-side .bd-alliance-header  { background: var(--red-bg); color: var(--red); }
.bd-alliance.blue-side .bd-alliance-header { background: var(--blue-bg); color: var(--blue); }

.bd-alliance-score-group {
    display: flex;
    align-items: center;
    gap: .6rem;
}
.bd-winner-label {
    font-size: .7rem;
    font-weight: 800;
    letter-spacing: .08em;
    color: var(--green);
    background: rgba(52,211,153,.1);
    border: 1px solid rgba(52,211,153,.25);
    padding: .15rem .5rem;
    border-radius: 4px;
}
.bd-alliance-score {
    font-family: var(--mono);
    font-size: 1.5rem;
}

.bd-section {
    padding: .6rem 1rem;
    border-top: 1px solid var(--border);
}

.bd-section-title {
    font-weight: 700;
    font-size: .82rem;
    text-transform: uppercase;
    letter-spacing: .05em;
    color: var(--primary);
    margin-bottom: .5rem;
}

/* Robot rows (per-team fields) */
.bd-robots {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: .5rem;
    margin-bottom: .5rem;
}

.bd-robot-card {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: .4rem .6rem;
    text-align: center;
}

.bd-robot-num {
    font-weight: 700;
    font-family: var(--mono);
    font-size: .9rem;
    margin-bottom: .2rem;
}

.bd-robot-field {
    display: flex;
    justify-content: space-between;
    font-size: .75rem;
    padding: .15rem 0;
    border-top: 1px solid var(--border);
}

.bd-robot-label { color: var(--text-muted); }
.bd-robot-value { font-weight: 600; }
.bd-robot-value.yes { color: #22c55e; }
.bd-robot-value.no  { color: var(--text-muted); }
.bd-robot-value.deep { color: #a855f7; }
.bd-robot-value.shallow { color: #3b82f6; }
.bd-robot-value.parked { color: #eab308; }

/* Stats grid (alliance-level fields) */
.bd-stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: .3rem .8rem;
}

.bd-stat-row {
    display: flex;
    justify-content: space-between;
    padding: .2rem 0;
    font-size: .8rem;
    border-bottom: 1px dotted rgba(99,102,241,.1);
}

.bd-stat-label { color: var(--text-muted); }
.bd-stat-value { font-weight: 600; font-family: var(--mono); }

/* Reef grid visualization */
.bd-reef {
    margin: .5rem 0;
}

.bd-reef-title {
    font-size: .75rem;
    font-weight: 600;
    color: var(--text-muted);
    margin-bottom: .3rem;
}

.bd-reef-grid {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 2px;
}

.bd-reef-cell {
    aspect-ratio: 1;
    border-radius: 3px;
    background: var(--card-bg);
    border: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: .55rem;
    font-weight: 600;
    color: var(--text-muted);
    min-width: 0;
}

.bd-reef-cell.filled {
    background: var(--primary);
    color: #fff;
    border-color: var(--primary);
}
.bd-reef-cell.filled-auto {
    background: #22c55e;
    color: #fff;
    border-color: #22c55e;
}

.bd-reef-row-label {
    grid-column: 1 / -1;
    font-size: .65rem;
    font-weight: 600;
    color: var(--text-muted);
    padding: .15rem 0 0;
    text-align: center;
}

/* Bonus badges */
.bd-bonuses {
    display: flex;
    flex-wrap: wrap;
    gap: .3rem;
    margin-top: .4rem;
}

.bd-bonus-badge {
    font-size: .7rem;
    font-weight: 600;
    padding: .15rem .5rem;
    border-radius: 999px;
    border: 1px solid var(--border);
    background: var(--card-bg);
    color: var(--text-muted);
}

.bd-bonus-badge.achieved {
    background: rgba(34,197,94,.15);
    border-color: rgba(34,197,94,.4);
    color: #22c55e;
}

/* Foul section */
.bd-fouls {
    display: flex;
    gap: 1rem;
    font-size: .8rem;
}

.bd-foul-item { display: flex; gap: .3rem; align-items: baseline; }
.bd-foul-label { color: var(--text-muted); }
.bd-foul-value { font-weight: 600; font-family: var(--mono); }

/* Match total bar */
.bd-total-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: .6rem 1rem;
    border-top: 2px solid var(--border);
    font-weight: 700;
}
.bd-total-label { font-size: .85rem; text-transform: uppercase; letter-spacing: .05em; }
.bd-total-score { font-family: var(--mono); font-size: 1.3rem; }
.bd-alliance.red-side .bd-total-bar  { color: var(--red); }
.bd-alliance.blue-side .bd-total-bar { color: var(--blue); }

/* Match select indicator for breakdown availability */
#bd-match-select option.has-breakdown {
    color: #22c55e;
}

/* Trough display */
.bd-trough {
    display: inline-flex;
    align-items: center;
    gap: .3rem;
    font-size: .8rem;
    margin-top: .3rem;
}
.bd-trough-label { color: var(--text-muted); }
.bd-trough-value { font-weight: 600; font-family: var(--mono); }

.site-footer {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: .5rem;
    padding: 1.2rem 2rem;
    margin-top: 2rem;
    font-size: .74rem;
    font-weight: 500;
    color: var(--text-muted);
    letter-spacing: .02em;
    border-top: 1px solid var(--border);
    position: relative;
    z-index: 0;
}

.footer-sep {
    opacity: .35;
}

.footer-version {
    font-family: var(--mono);
    font-size: .68rem;
    background: var(--primary-soft);
    color: var(--primary-hover);
    padding: .15rem .55rem;
    border-radius: 999px;
    border: 1px solid var(--border);
}

/* ═══ SCROLLBAR ═══════════════════════════════════════════ */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--bg);
}

::-webkit-scrollbar-thumb {
    background: rgba(99,102,241,.2);
    border-radius: 999px;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(99,102,241,.35);
}

/* ═══ SELECTION ═══════════════════════════════════════════ */
::selection {
    background: rgba(99,102,241,.3);
    color: #fff;
}

/* ═══ RESPONSIVE ═══════════════════════════════════════════ */
@media (max-width: 768px) {
    header, main {
        padding-left: 1.2rem;
        padding-right: 1.2rem;
    }

    .tabs {
        padding: 0 1rem;
        overflow-x: auto;
        scrollbar-width: none;
    }
    .tabs::-webkit-scrollbar { display: none; }

    .tab {
        padding: .7rem 1rem;
        font-size: .82rem;
        white-space: nowrap;
    }

    #alliance-grid { grid-template-columns: 1fr; }
    .team-highlights { flex-direction: column; }

    .h2h-header { font-size: 1.15rem; }

    .alliance-team-row { flex-wrap: wrap; }
    .partner-badges { margin-left: 0; margin-top: .3rem; }

    .pbp-arena { grid-template-columns: 1fr; }
    .pbp-topbar { flex-wrap: wrap; justify-content: center; gap: .5rem; }
    .pbp-team-number { font-size: 1.4rem; min-width: 60px; }
    .pbp-team-stats { grid-template-columns: repeat(3, 1fr); }

    .bd-content { flex-direction: column; }
    .bd-robots { grid-template-columns: 1fr 1fr 1fr; }
    .bd-stats { grid-template-columns: 1fr; }
    .bd-reef-cell { font-size: .45rem; }

    .summary-stats-row { grid-template-columns: repeat(2, 1fr); }
    .summary-conn-row { flex-wrap: wrap; }
}


/* ═══════════════════════════════════════════════════════════
   EVENT SUMMARY TAB
   ═══════════════════════════════════════════════════════════ */

.summary-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.2rem;
    flex-wrap: wrap;
    gap: .5rem;
}
.summary-header h2 {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text);
    margin: 0;
}
.summary-refresh-btn {
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--primary);
    padding: .45rem 1rem;
    border-radius: var(--radius);
    font-family: var(--font);
    font-size: .82rem;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
}
.summary-refresh-btn:hover {
    background: var(--primary-soft);
    border-color: var(--primary);
}
.summary-refresh-btn:disabled {
    opacity: .5;
    cursor: not-allowed;
}

/* ── Demographic stat cards ────────────────────────────────── */
.summary-stats-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: .75rem;
    margin-bottom: 1.2rem;
}
.summary-stat-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 1rem;
    text-align: center;
    transition: var(--transition);
}
.summary-stat-card:hover {
    border-color: var(--primary);
    box-shadow: var(--shadow-glow);
}
.summary-stat-value {
    font-size: 1.7rem;
    font-weight: 800;
    font-family: var(--mono);
    color: var(--primary);
    line-height: 1.2;
}
.summary-stat-label {
    font-size: .78rem;
    color: var(--text-secondary);
    margin-top: .25rem;
}
.summary-stat-sub {
    display: block;
    font-size: .7rem;
    color: var(--text-muted);
    margin-top: .15rem;
}

/* ── Summary cards (HoF, History, Top Scorers) ─────────────── */
.summary-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 1rem 1.2rem;
    margin-bottom: 1rem;
}
.summary-card h3 {
    font-size: 1rem;
    font-weight: 700;
    color: var(--text);
    margin: 0 0 .6rem 0;
}
.summary-card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
    user-select: none;
}
.summary-card-header h3 {
    margin: 0;
}
.collapse-icon {
    font-size: .75rem;
    color: var(--text-muted);
    transition: var(--transition);
}
.summary-card-header:hover .collapse-icon {
    color: var(--text);
}
#summary-history-body {
    overflow: hidden;
    max-height: 2000px;
    transition: max-height .35s ease, opacity .25s ease, margin .25s ease;
    opacity: 1;
    margin-top: .6rem;
}
#summary-history-body.collapsed {
    max-height: 0;
    opacity: 0;
    margin-top: 0;
}
.summary-card-desc {
    font-size: .78rem;
    color: var(--text-muted);
    margin: 0 0 .75rem 0;
}

/* Hall of Fame */
.summary-hof-team {
    display: flex;
    align-items: center;
    gap: .6rem;
    padding: .4rem 0;
    border-bottom: 1px solid var(--border-subtle);
}
.summary-hof-team:last-child { border-bottom: none; }
.summary-hof-num {
    font-family: var(--mono);
    font-weight: 700;
    font-size: .95rem;
    color: var(--yellow);
    min-width: 3.5rem;
}
.summary-hof-name {
    font-weight: 600;
    color: var(--text);
}
.summary-hof-loc {
    color: var(--text-muted);
    font-size: .78rem;
    margin-left: auto;
}

/* Connection filter bar */
.conn-filter-bar {
    display: flex;
    gap: .35rem;
    margin-bottom: .75rem;
}
.conn-filter-btn {
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    padding: .3rem .75rem;
    border-radius: 100px;
    font-family: var(--font);
    font-size: .75rem;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
}
.conn-filter-btn:hover {
    border-color: var(--primary);
    color: var(--text);
}
.conn-filter-btn.active {
    background: var(--primary);
    border-color: var(--primary);
    color: #fff;
}

/* Prior connections */
.summary-conn-row {
    display: flex;
    align-items: center;
    gap: .5rem;
    padding: .45rem 0;
    border-bottom: 1px solid var(--border-subtle);
}
.summary-conn-row:last-child { border-bottom: none; }
.conn-team {
    font-family: var(--mono);
    font-weight: 700;
    font-size: .9rem;
    color: var(--text);
}
.conn-vs {
    color: var(--text-muted);
    font-size: .75rem;
}
.conn-badges {
    display: flex;
    gap: .35rem;
    margin-left: auto;
}
.conn-badge {
    font-size: .7rem;
    font-weight: 600;
    padding: .15rem .5rem;
    border-radius: 100px;
    white-space: nowrap;
}
.conn-partner {
    background: rgba(34, 197, 94, .1);
    color: var(--green);
    border: 1px solid rgba(34, 197, 94, .25);
}
.conn-opponent {
    background: rgba(239, 68, 68, .1);
    color: var(--red);
    border: 1px solid rgba(239, 68, 68, .25);
}

/* Top scorers */
.summary-top-row {
    display: flex;
    align-items: center;
    gap: .6rem;
    padding: .5rem 0;
    border-bottom: 1px solid var(--border-subtle);
}
.summary-top-row:last-child { border-bottom: none; }
.top-medal {
    font-weight: 800;
    font-size: .8rem;
    color: var(--yellow);
    min-width: 2rem;
    text-align: center;
}
.summary-top-row:nth-child(2) .top-medal { color: var(--text-secondary); }
.summary-top-row:nth-child(3) .top-medal { color: #cd7f32; }
.top-team-num {
    font-family: var(--mono);
    font-weight: 700;
    font-size: .95rem;
    color: var(--text);
    min-width: 3.5rem;
}
.top-team-name {
    font-weight: 500;
    color: var(--text-secondary);
    flex: 1;
}
.top-opr {
    font-family: var(--mono);
    font-weight: 700;
    font-size: .85rem;
    color: var(--primary);
}
.top-rank {
    font-size: .75rem;
    color: var(--text-muted);
    min-width: 4.5rem;
    text-align: right;
}